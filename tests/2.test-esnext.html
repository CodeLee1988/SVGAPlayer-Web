<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>SVGA Lite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="svga.lite.min.js"></script>
</head>
<body>
  <canvas id="canvas"></canvas>

  <script>
    (async () => {
      const { Downloader, Parser, Player } = SVGA

      const downloader = new Downloader()

      const svgaFile = './assets/TwitterHeart.svga'
      // const svgaFile = './assets/angel.svga'
      // const svgaFile = './assets/kingset.svga'

      const fileData = await downloader.request(svgaFile)

      console.log('File Data', fileData)

      const parser = new Parser({ worker: true })

      const svgaData = await parser.do(fileData)

      console.log('SVGA Data', svgaData)

      const player = new Player('#canvas')

      player
        .$on('start', () => {
          console.log('event start')
        })
        .$on('pause', () => {
          console.log('event pause')
        })
        .$on('stop', () => {
          console.log('event stop')
        })
        .$on('end', () => {
          console.log('event end')
        })
        .$on('clear', () => {
          console.log('event clear')
        })
        .$on('process', () => {
          console.log('event process', player.progress)
        })

      await player.mount(svgaData)

      player.set({
        loop: 1,
        fillMode: 'forwards'
        // fillMode: 'backwards'
      })

      console.log(player)

      player.start()

      // setTimeout(() => {
      //   player.pause()
      // }, 3000)

      // setTimeout(() => {
      //   player.start()
      // }, 4000)

      // setTimeout(() => {
      //   player.stop()
      // }, 5000)

      // setTimeout(() => {
      //   player.clear()
      // }, 6000)
    })()
  </script>
</body>
</html>
